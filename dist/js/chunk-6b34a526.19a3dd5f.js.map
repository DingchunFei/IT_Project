{"version":3,"sources":["webpack:///./src/views/Profile.vue?bad8","webpack:///./src/views/Profile.vue?7ed7","webpack:///src/views/Profile.vue","webpack:///./src/views/Profile.vue?1e1d","webpack:///./src/views/Profile.vue?3795"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","handleAvatarSuccess","beforeAvatarUpload","imageUrl","profile","theme","on","onThemeChange","_v","submitForm","onEdit","cancel","goHome","model","value","callback","$$v","$set","expression","_s","firstName","lastName","staticRenderFns","component"],"mappings":"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","file":"js/chunk-6b34a526.19a3dd5f.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&id=32ff8143&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&id=32ff8143&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"profile\"},[_c('el-card',[_c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-row',[_c('div',{staticClass:\"el-upload\"},[(_vm.isEditable)?_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]):_c('div',{staticClass:\"avatar\"},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('el-avatar',{staticClass:\"el-icon-user-solid avatar-uploader-icon\",attrs:{\"fit\":\"fill\",\"shape\":\"square\"}})],1)],1)]),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":8}},[(_vm.isEditable)?_c('div',[_c('ThemePicker',{attrs:{\"theme\":_vm.profile.theme},on:{\"onThemeChange\":_vm.onThemeChange}})],1):_c('div',[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\" Theme \")])],1)])],1),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-button-group',[(_vm.isEditable)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\" Submit \")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onEdit}},[_vm._v(\" Edit \")]),(_vm.isEditable)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.cancel}},[_vm._v(\" Cancel \")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goHome}},[_vm._v(\" Home \")])],1)],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('div',[_vm._v(\"First name: \")])]),_c('el-col',{attrs:{\"span\":6}},[(_vm.isEditable)?_c('el-input',{attrs:{\"placeholder\":\"Please enter your first name\"},model:{value:(_vm.profile.firstName),callback:function ($$v) {_vm.$set(_vm.profile, \"firstName\", $$v)},expression:\"profile.firstName\"}}):_c('div',[_vm._v(\" \"+_vm._s(_vm.profile.firstName)+\" \")])],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('div',[_vm._v(\"Last name: \")])]),_c('el-col',{attrs:{\"span\":6}},[(_vm.isEditable)?_c('el-input',{attrs:{\"placeholder\":\"Please enter your last name\"},model:{value:(_vm.profile.lastName),callback:function ($$v) {_vm.$set(_vm.profile, \"lastName\", $$v)},expression:\"profile.lastName\"}}):_c('div',[_vm._v(\" \"+_vm._s(_vm.profile.lastName)+\" \")])],1)],1)],1)],1)],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"profile\">\r\n      <el-card>\r\n        <div>\r\n          <el-row>\r\n<!--col: avatar buttons-->\r\n            <el-col :span=\"8\">\r\n<!--   row: 头像           -->\r\n              <el-row>\r\n                <div class=\"el-upload\">\r\n                  <el-upload v-if=\"isEditable\"\r\n                      class=\"avatar-uploader\"\r\n                      action=\"\"\r\n                      :show-file-list=\"false\"\r\n                      :on-success=\"handleAvatarSuccess\"\r\n                      :before-upload=\"beforeAvatarUpload\">\r\n                    <img v-if=\"imageUrl\"\r\n                         :src=\"imageUrl\"\r\n                         class=\"avatar\">\r\n                    <i v-else\r\n                       class=\"el-icon-plus avatar-uploader-icon\" >\r\n                    </i>\r\n                  </el-upload>\r\n                  <div v-else\r\n                       class=\"avatar\">\r\n                    <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n                    <el-avatar v-else class=\"el-icon-user-solid avatar-uploader-icon\"\r\n                               fit=\"fill\"\r\n                               shape=\"square\">\r\n                    </el-avatar>\r\n                  </div>\r\n                </div>\r\n              </el-row>\r\n<!--     row: theme selector         -->\r\n              <el-row type=\"flex\" justify=\"center\">\r\n                <el-col :span=\"8\">\r\n                  <div v-if=\"isEditable\">\r\n                    <ThemePicker\r\n                        :theme=\"profile.theme\"\r\n                        @onThemeChange=\"onThemeChange\"\r\n                    />\r\n                  </div>\r\n                  <div v-else>\r\n                    <el-button type=\"primary\">\r\n                      Theme\r\n                    </el-button>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n<!--row: buttons-->\r\n              <el-row type=\"flex\" justify=\"center\">\r\n                <el-button-group>\r\n                  <el-button v-if=\"isEditable\" type=\"primary\" @click=\"submitForm\">\r\n                    Submit\r\n                  </el-button>\r\n                  <el-button v-else type=\"primary\" @click=\"onEdit\">\r\n                    Edit\r\n                  </el-button>\r\n                  <el-button v-if=\"isEditable\" type=\"primary\" @click=\"cancel\">\r\n                    Cancel\r\n                  </el-button>\r\n                  <el-button v-else type=\"primary\" @click=\"goHome\">\r\n                    Home\r\n                  </el-button>\r\n                </el-button-group>\r\n              </el-row>\r\n            </el-col>\r\n\r\n\r\n<!--col: name-->\r\n            <el-col :span=\"12\">\r\n<!--     row: First name-->\r\n              <el-row>\r\n                <el-col :span=\"6\">\r\n                  <div>First name: </div>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                  <el-input v-if=\"isEditable\" v-model=\"profile.firstName\" placeholder=\"Please enter your first name\"></el-input>\r\n                  <div v-else> {{profile.firstName}} </div>\r\n                </el-col>\r\n              </el-row>\r\n\r\n<!--    row: Last name-->\r\n              <el-row>\r\n                <el-col :span=\"6\">\r\n                  <div>Last name: </div>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                  <el-input v-if=\"isEditable\" v-model=\"profile.lastName\" placeholder=\"Please enter your last name\"></el-input>\r\n                  <div v-else> {{profile.lastName}} </div>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ThemePicker from \"../components/ThemePicker\";\r\n  import utils from \"../common/utils\";\r\n  export default {\r\n    name: \"Profile\",\r\n    components: {\r\n      ThemePicker,\r\n    },\r\n    data(){\r\n      return{\r\n        imageUrl: '',\r\n        isEditable: false,\r\n        profile: {\r\n          firstName: '',\r\n          lastName: '',\r\n          avatar: '',\r\n          theme: '#409EFF',\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      //theme改变后获取theme\r\n      onThemeChange(theme){\r\n        this.profile.theme = theme\r\n        console.log(\"theme: \"+theme)\r\n      },\r\n\r\n      //编辑\r\n      onEdit(){\r\n        this.isEditable = true\r\n      },\r\n\r\n      //取消编辑\r\n      cancel(){\r\n        this.isEditable = false\r\n      },\r\n\r\n      //回主页\r\n      goHome(){\r\n        this.$router.push(\"/Home\");\r\n      },\r\n\r\n      submitForm(){\r\n        utils.updateProfile(this.profile).then(res => {\r\n          console.log(res)\r\n          this.cancel()\r\n        })\r\n      },\r\n\r\n      //头像上传\r\n      handleAvatarSuccess(res, file) {\r\n        this.imageUrl = URL.createObjectURL(file.raw);\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n        if (!isJPG) {\r\n          this.$message.error('Only JPG is available!');\r\n          return\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('The size of image should not exceed 2MB!');\r\n          return\r\n        }\r\n\r\n        // console.log(file)\r\n        let fd = new FormData()\r\n        fd.append('picture', file)\r\n        // console.log(fd)\r\n\r\n        let _this = this\r\n        let name = ''\r\n\r\n        utils.createImage(fd).then(res => {\r\n          name = res\r\n          utils.readImage(res).then(res => {\r\n            //解析图像Blob数据\r\n            _this.imageUrl = URL.createObjectURL(res)\r\n            //头像文件名\r\n            _this.profile.avatar = name;\r\n          })\r\n        })\r\n\r\n        return isJPG && isLt2M;\r\n      }\r\n    },\r\n    created() {\r\n      utils.readProfile().then(res => {\r\n        const profile = res.data\r\n        this.profile.firstName = profile.first_name\r\n        this.profile.lastName = profile.last_name\r\n        if(profile.avatar != null && profile.avatar != ''){\r\n          this.profile.theme = profile.theme\r\n          utils.readImage(profile.avatar).then(res => {\r\n            //解析图像Blob数据\r\n            this.imageUrl = URL.createObjectURL(res)\r\n            console.log(\"image: \"+this.imageUrl)\r\n          })\r\n        }\r\n        if(profile.theme != null && profile.theme != ''){\r\n          this.profile.theme = profile.theme\r\n        }\r\n        console.log(this.profile.theme)\r\n        console.log(profile)\r\n      })\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .profile{\r\n    text-align: center;\r\n  }\r\n  .el-row {\r\n    margin-bottom: 20px;\r\n  }\r\n  .avatar-uploader {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=32ff8143&scoped=true&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&id=32ff8143&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32ff8143\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}